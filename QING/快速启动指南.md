# DrawConnect 快速启动指南

## 🚀 5分钟快速启动

### 前置要求检查

确保你已安装:
- ✅ Android Studio (最新版本)
- ✅ JDK 17 或更高版本
- ✅ Node.js 16+ 和 npm
- ✅ MongoDB 4.4+

### 步骤 1: 启动 MongoDB

**Windows:**
```bash
# 如果MongoDB已安装为服务,它应该已经在运行
# 检查服务状态
net start MongoDB

# 或手动启动
mongod
```

**Mac/Linux:**
```bash
# 启动MongoDB服务
sudo systemctl start mongod

# 或使用brew(Mac)
brew services start mongodb-community
```

### 步骤 2: 启动后端服务

```bash
# 进入后端目录
cd DrawConnect/backend

# 安装依赖(首次运行)
npm install

# 复制环境配置文件
cp .env.example .env

# 启动开发服务器
npm run dev
```

看到以下输出表示成功:
```
MongoDB connected successfully
DrawConnect API server is running on port 3000
```

### 步骤 3: 配置 Android 应用

#### 3.1 修改 API 地址

打开文件: `app/src/main/java/com/drawconnect/di/NetworkModule.kt`

**如果使用 Android 模拟器:**
```kotlin
private const val BASE_URL = "http://10.0.2.2:3000/"
```

**如果使用真机测试:**
```kotlin
private const val BASE_URL = "http://你的电脑IP:3000/"
```

查找你的电脑IP:
- Windows: `ipconfig`
- Mac/Linux: `ifconfig` 或 `ip addr`

### 步骤 4: 运行 Android 应用

1. 用 Android Studio 打开 `DrawConnect` 项目
2. 等待 Gradle 同步完成(首次可能需要几分钟)
3. 连接 Android 设备或启动模拟器
4. 点击绿色的 Run 按钮 ▶️

### 步骤 5: 开始使用

1. **注册账号**: 首次使用需要注册
   - 输入用户名、邮箱、密码
   - 点击"注册"按钮

2. **或跳过登录**: 点击"跳过登录(离线模式)"直接进入绘画界面

3. **开始绘画**:
   - 选择工具(画笔/橡皮擦等)
   - 点击调色板选择颜色
   - 在画布上绘画
   - 点击保存按钮保存作品

## 🔧 常见问题

### Q1: 后端启动失败 - MongoDB连接错误

**解决方案:**
1. 确保 MongoDB 正在运行
2. 检查 `.env` 文件中的 `MONGODB_URI` 配置
3. 默认连接: `mongodb://localhost:27017/drawconnect`

### Q2: Android 应用无法连接后端

**解决方案:**
1. 检查后端是否正在运行(`http://localhost:3000/health`)
2. 确认 `NetworkModule.kt` 中的 BASE_URL 配置正确
3. 如果使用真机,确保手机和电脑在同一WiFi网络
4. 检查防火墙是否阻止了3000端口

### Q3: Gradle 同步失败

**解决方案:**
1. 检查网络连接
2. 在 Android Studio 中: File → Invalidate Caches / Restart
3. 删除 `.gradle` 文件夹后重新同步

### Q4: 应用崩溃或无法启动

**解决方案:**
1. 检查 Android Studio 的 Logcat 查看错误信息
2. 确保使用的是 Android API 26 (Android 8.0) 或更高版本
3. 清理项目: Build → Clean Project
4. 重新构建: Build → Rebuild Project

## 📱 测试功能

### 测试绘画功能
1. 选择画笔工具
2. 选择一个颜色
3. 在画布上绘制
4. 测试撤销/重做按钮
5. 测试橡皮擦工具
6. 点击保存,输入作品名称

### 测试用户认证
1. 注册一个新账号
2. 登出后重新登录
3. 测试错误的密码(应该显示错误提示)

### 测试云端备份(需要后端运行)
1. 登录账号
2. 绘制一幅作品
3. 保存作品
4. 检查后端 `uploads` 文件夹是否有文件

## 🎨 快速体验建议

1. **画一个简单的笑脸**:
   - 用黑色画笔画圆形轮廓
   - 画两个眼睛
   - 画一个微笑的嘴巴
   - 保存作品

2. **测试颜色**:
   - 尝试不同的颜色
   - 测试颜色选择器的所有颜色

3. **测试撤销功能**:
   - 画几笔
   - 点击撤销按钮
   - 点击重做按钮

## 📚 更多信息

- 完整文档: 查看 `README.md`
- 项目总结: 查看 `第一阶段完成总结.md`
- 后端API: 查看 `backend/README.md`

## 🆘 需要帮助?

如果遇到问题:
1. 检查上面的常见问题部分
2. 查看 Android Studio 的 Logcat
3. 查看后端控制台的错误信息
4. 确保所有依赖都正确安装

---

**祝你使用愉快! 🎉**